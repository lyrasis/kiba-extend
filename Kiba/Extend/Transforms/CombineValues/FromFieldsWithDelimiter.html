<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter
  
    &mdash; Kiba-Extend Documentation
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Transforms.html" title="Kiba::Extend::Transforms (module)">Transforms</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span>
     &raquo; 
    <span class="title">FromFieldsWithDelimiter</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../Allable.html" title="Kiba::Extend::Transforms::Allable (module)">Allable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/kiba/extend/transforms/combine_values/from_fields_with_delimiter.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Do not use with both prepend_source_field_name and
deduplicate set to true. There is no way to safely
interpret the desired behavior with this combination
of options.</p>
</div>
  </div>

<p>Combine values from given fields into the target field.</p>

<p>This is like the CONCATENATE function in many spreadsheets. The given
  <code>delim</code> value is used as a separator between the combined values.</p>

<p><strong>Note:</strong> Used with defaults, this has the same function as
  <span class='object_link'><a href="FullRecord.html" title="Kiba::Extend::Transforms::CombineValues::FullRecord (class)">FullRecord</a></span>, but deletes the source fields. <span class='object_link'><a href="FullRecord.html" title="Kiba::Extend::Transforms::CombineValues::FullRecord (class)">FullRecord</a></span> retains
  source fields by default.</p>

<p>If target field has the same name as one of the source fields, and
  <code>delete_sources</code> = true, no values are lost. The target field
  is not deleted.</p>

<p>Blank/nil values are dropped. If <code>prepend_source_field_name = true</code>,
  names of blank/nil fields are omitted</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>With defaults</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform CombineValues::FromFieldsWithDelimiter
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span><span class='op'>::</span><span class='const'>FromFieldsWithDelimiter</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Weddy</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adopted</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Niblet</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tiresias</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_xform'>xform</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Weddy m adopted</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Niblet f hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tiresias m</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keet hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Prepending field names</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform CombineValues::FromFieldsWithDelimiter,
</span><span class='comment'>#   prepend_source_field_name: true
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span><span class='op'>::</span><span class='const'>FromFieldsWithDelimiter</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>prepend_source_field_name:</span> <span class='kw'>true</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Weddy</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adopted</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Niblet</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tiresias</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_xform'>xform</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name: Weddy sex: m source: adopted</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name: Niblet sex: f source: hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name: Tiresias sex: m</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name: Keet source: hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>index:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>With custom sources, a source as target, and delim</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform CombineValues::FromFieldsWithDelimiter,
</span><span class='comment'>#  sources: %i[name sex],
</span><span class='comment'>#  target: :name,
</span><span class='comment'>#  delim: &quot;, &quot;
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span><span class='op'>::</span><span class='const'>FromFieldsWithDelimiter</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>sources:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>name</span><span class='words_sep'> </span><span class='tstring_content'>sex</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>target:</span> <span class='symbol'>:name</span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Weddy</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adopted</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Niblet</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tiresias</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>sex:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>na</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_xform'>xform</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Weddy, m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adopted</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Niblet, f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tiresias, m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hatched</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>source:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>na</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Deduplicating combined values</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform CombineValues::FromFieldsWithDelimiter,
</span><span class='comment'>#  sources: %i[p1 p2 p3 p4],
</span><span class='comment'>#  target: :p,
</span><span class='comment'>#  delim: &quot;|&quot;,
</span><span class='comment'>#  deduplicate: true,
</span><span class='comment'>#  dedupe_delim: &quot;;&quot;
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span><span class='op'>::</span><span class='const'>FromFieldsWithDelimiter</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>sources:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>p1</span><span class='words_sep'> </span><span class='tstring_content'>p2</span><span class='words_sep'> </span><span class='tstring_content'>p3</span><span class='words_sep'> </span><span class='tstring_content'>p4</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>target:</span> <span class='symbol'>:p</span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>deduplicate:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>dedupe_delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>p1:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p2:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p3:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p4:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>p1:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p2:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b|b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p3:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p4:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|a</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_xform'>xform</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>p:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>p:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Deduplicate without separate dedupe_delim</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform CombineValues::FromFieldsWithDelimiter,
</span><span class='comment'>#  sources: %i[p1 p2 p3 p4],
</span><span class='comment'>#  target: :p,
</span><span class='comment'>#  delim: &quot;|&quot;,
</span><span class='comment'>#  deduplicate: true
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span><span class='op'>::</span><span class='const'>FromFieldsWithDelimiter</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>sources:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>p1</span><span class='words_sep'> </span><span class='tstring_content'>p2</span><span class='words_sep'> </span><span class='tstring_content'>p3</span><span class='words_sep'> </span><span class='tstring_content'>p4</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>target:</span> <span class='symbol'>:p</span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>deduplicate:</span> <span class='kw'>true</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>p1:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p2:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p3:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p4:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>p1:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p2:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b|b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p3:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b|b;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>p4:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|a</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_xform'>xform</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>p:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>p:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b|b|b;b|a</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>ERROR when prepending and deduplicating</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform CombineValues::FromFieldsWithDelimiter,
</span><span class='comment'>#  sources: %i[p1 p2 p3 p4],
</span><span class='comment'>#  target: :p,
</span><span class='comment'>#  delim: &quot;|&quot;
</span><span class='comment'>#  deduplicate: true,
</span><span class='comment'>#  prepend_source_field_name: true
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../CombineValues.html" title="Kiba::Extend::Transforms::CombineValues (module)">CombineValues</a></span></span><span class='op'>::</span><span class='const'>FromFieldsWithDelimiter</span>
<span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>sources:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>p1</span><span class='words_sep'> </span><span class='tstring_content'>p2</span><span class='words_sep'> </span><span class='tstring_content'>p3</span><span class='words_sep'> </span><span class='tstring_content'>p4</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='symbol'>:p</span><span class='comma'>,</span>
    <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>deduplicate:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>prepend_source_field_name:</span> <span class='kw'>true</span>
  <span class='rbrace'>}</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lbrace'>{</span> <span class='id identifier rubyid_xform'>xform</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_raise_error'>raise_error</span><span class='lparen'>(</span>
  <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../UnsafeParameterComboError.html" title="Kiba::Extend::UnsafeParameterComboError (class)">UnsafeParameterComboError</a></span></span>
<span class='rparen'>)</span></code></pre>
    
  </div>


</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="FullRecord.html" title="Kiba::Extend::Transforms::CombineValues::FullRecord (class)">FullRecord</a></span></p>
</div>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(sources: :all, target: :index, delim: &quot; &quot;, prepend_source_field_name: false, delete_sources: true, deduplicate: false, dedupe_delim: nil)  &#x21d2; FromFieldsWithDelimiter </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of FromFieldsWithDelimiter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>(row)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(sources: :all, target: :index, delim: &quot; &quot;, prepend_source_field_name: false, delete_sources: true, deduplicate: false, dedupe_delim: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Kiba::Extend::Transforms::CombineValues::FromFieldsWithDelimiter (class)">FromFieldsWithDelimiter</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of FromFieldsWithDelimiter.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>sources</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>, <tt>:all</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:all</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Fields whose values are to be
combined</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:index</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Field into which the combined value will be
written. May be one of the source fields</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delim</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot; &quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Value used to separate individual field values
in combined target field</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prepend_source_field_name</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to insert the
source field name before its value in the combined value. Field
names are NOT prepended to nil or blank values. Since 4.0.0</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delete_sources</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to delete the source fields
after combining their values into the target field. If target
field name is the same as one of the source fields, the target
field is not deleted. Since 4.0.0</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>deduplicate</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to
deduplicate field values that will be combined before combining
them.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dedupe_delim</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>on which to split individual field
values for deduplication. Can be omitted if this is the same as
<code>delim</code> value, as that will also be applied AFTER this value by
default.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/kiba/extend/transforms/combine_values/from_fields_with_delimiter.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>sources:</span> <span class='symbol'>:all</span><span class='comma'>,</span> <span class='label'>target:</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>prepend_source_field_name:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>delete_sources:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>deduplicate:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>dedupe_delim:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@fields</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_sources'>sources</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span>
  <span class='ivar'>@target</span> <span class='op'>=</span> <span class='id identifier rubyid_target'>target</span>
  <span class='ivar'>@delim</span> <span class='op'>=</span> <span class='id identifier rubyid_delim'>delim</span>
  <span class='ivar'>@del</span> <span class='op'>=</span> <span class='id identifier rubyid_delete_sources'>delete_sources</span>
  <span class='ivar'>@prepend</span> <span class='op'>=</span> <span class='id identifier rubyid_prepend_source_field_name'>prepend_source_field_name</span>
  <span class='ivar'>@deduplicate</span> <span class='op'>=</span> <span class='id identifier rubyid_deduplicate'>deduplicate</span>
  <span class='ivar'>@dedupe_delim</span> <span class='op'>=</span> <span class='id identifier rubyid_dedupe_delim'>dedupe_delim</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_deduplicate'>deduplicate</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../UnsafeParameterComboError.html" title="Kiba::Extend::UnsafeParameterComboError (class)">UnsafeParameterComboError</a></span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Do not run </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> with both deduplicate and </span><span class='tstring_end'>&quot;</span></span>\
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prepend_source_field_name set to true</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="process-instance_method">
  
    #<strong>process</strong>(row)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>row</span>
      
      
        <span class='type'>(<tt>Hash{ Symbol =&gt; String, nil }</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/kiba/extend/transforms/combine_values/from_fields_with_delimiter.rb', line 206</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_finalize_fields'>finalize_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_fields_set'>fields_set</span>

  <span class='id identifier rubyid_fieldvals'>fieldvals</span> <span class='op'>=</span> <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_field_and_value'>field_and_value</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
  <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_src'>src</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_del'>del</span>
  <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_target'>target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_combined_value'>combined_value</span><span class='lparen'>(</span><span class='id identifier rubyid_fieldvals'>fieldvals</span><span class='rparen'>)</span>

  <span class='comment'># if prepend
</span>  <span class='comment'>#   pvals = []
</span>  <span class='comment'>#   vals.each_with_index do |val, i|
</span>  <span class='comment'>#     val = &quot;#{fields[i]}: #{val}&quot; unless val.nil?
</span>  <span class='comment'>#     pvals &lt;&lt; val
</span>  <span class='comment'>#   end
</span>  <span class='comment'>#   vals = pvals
</span>  <span class='comment'># end
</span>  <span class='comment'># val = vals.compact.join(delim)
</span>  <span class='comment'># row[target] = val.empty? ? nil : val
</span>
  <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jul 14 19:28:08 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.1.7).
</div>

    </div>
  </body>
</html>