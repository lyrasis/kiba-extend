<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Kiba::Extend::Transforms::Fingerprint::FlagChanged
  
    &mdash; Kiba-Extend Documentation
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Kiba::Extend::Transforms::Fingerprint::FlagChanged";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Transforms.html" title="Kiba::Extend::Transforms (module)">Transforms</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Fingerprint.html" title="Kiba::Extend::Transforms::Fingerprint (module)">Fingerprint</a></span></span>
     &raquo; 
    <span class="title">FlagChanged</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Kiba::Extend::Transforms::Fingerprint::FlagChanged
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Kiba::Extend::Transforms::Fingerprint::FlagChanged</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/kiba/extend/transforms/fingerprint/flag_changed.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Decodes a fingerprint string and compares each decoded field value to
  the value in the main field. Records the field name for each value
  with changes in the target field. If all decoded fields match their
  main fields, the target field is left blank.</p>

<p>See <span class='object_link'><a href="Decode.html" title="Kiba::Extend::Transforms::Fingerprint::Decode (class)">Decode</a></span> for details on the decoding process.</p>

<h2 id="notes-on-examples">Notes on examples</h2>
<p>### Example 1
- Row 1: fingerprinted values didn’t change
- Row 2: :b changed from bee to bees, and :d changed from deer to doe
  after fingerprint was encoded. :e was changed from nil to an empty
  string, but because :empty_equals_nil is true by default, this
  change is not reported
- Row 3: :d was removed after fingerprint was encoded.</p>

<h3 id="example-2">Example 2</h3>
<ul>
  <li>Shows how Row 2 from Example 1 is treated differently if
:empty_equals_nil is set to false</li>
</ul>

<h3 id="example-3">Example 3</h3>
<ul>
  <li>Shows how Row 3 from Example 1 is treated differently if we indicate
that :d should be ignored</li>
</ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>1: With defaults</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Fingerprint::FlagChanged,
</span><span class='comment'>#   fingerprint: :fp,
</span><span class='comment'>#   source_fields: %i[b c d e],
</span><span class='comment'>#   delim: &#39;;;;&#39;,
</span><span class='comment'>#   target: :changed
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Fingerprint.html" title="Kiba::Extend::Transforms::Fingerprint (module)">Fingerprint</a></span></span><span class='op'>::</span><span class='const'>FlagChanged</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Fingerprint::FlagChanged#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>fingerprint:</span> <span class='symbol'>:fp</span><span class='comma'>,</span>
  <span class='label'>source_fields:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>b</span><span class='words_sep'> </span><span class='tstring_content'>c</span><span class='words_sep'> </span><span class='tstring_content'>d</span><span class='words_sep'> </span><span class='tstring_content'>e</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>;;;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>target:</span> <span class='symbol'>:changed</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>e:</span> <span class='kw'>nil</span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bees</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>doe</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>e:</span> <span class='kw'>nil</span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp_b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fp_d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>changed:</span> <span class='kw'>nil</span><span class='rbrace'>}</span><span class='comma'>,</span>
   <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bees</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>doe</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp_b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fp_d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>changed:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b|d</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
   <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp_b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fp_d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>changed:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>2: With :empty_equals_nil false</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Fingerprint::FlagChanged,
</span><span class='comment'>#   fingerprint: :fp,
</span><span class='comment'>#   source_fields: %i[b c d e],
</span><span class='comment'>#   delim: &#39;;;;&#39;,
</span><span class='comment'>#   target: :changed,
</span><span class='comment'>#   empty_equals_nil: false
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Fingerprint.html" title="Kiba::Extend::Transforms::Fingerprint (module)">Fingerprint</a></span></span><span class='op'>::</span><span class='const'>FlagChanged</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Fingerprint::FlagChanged#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>fingerprint:</span> <span class='symbol'>:fp</span><span class='comma'>,</span>
  <span class='label'>source_fields:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>b</span><span class='words_sep'> </span><span class='tstring_content'>c</span><span class='words_sep'> </span><span class='tstring_content'>d</span><span class='words_sep'> </span><span class='tstring_content'>e</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>;;;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>target:</span> <span class='symbol'>:changed</span><span class='comma'>,</span>
  <span class='label'>empty_equals_nil:</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>e:</span> <span class='kw'>nil</span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>e:</span> <span class='kw'>nil</span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp_b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fp_d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>changed:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>3: With ignore_fields</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Fingerprint::FlagChanged,
</span><span class='comment'>#   fingerprint: :fp,
</span><span class='comment'>#   source_fields: %i[b c d e],
</span><span class='comment'>#   delim: &#39;;;;&#39;,
</span><span class='comment'>#   target: :changed,
</span><span class='comment'>#   ignore_fields: :d
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Fingerprint.html" title="Kiba::Extend::Transforms::Fingerprint (module)">Fingerprint</a></span></span><span class='op'>::</span><span class='const'>FlagChanged</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Fingerprint::FlagChanged#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>fingerprint:</span> <span class='symbol'>:fp</span><span class='comma'>,</span>
  <span class='label'>source_fields:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>b</span><span class='words_sep'> </span><span class='tstring_content'>c</span><span class='words_sep'> </span><span class='tstring_content'>d</span><span class='words_sep'> </span><span class='tstring_content'>e</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>;;;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>target:</span> <span class='symbol'>:changed</span><span class='comma'>,</span>
  <span class='label'>ignore_fields:</span> <span class='symbol'>:d</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
   <span class='lbrace'>{</span><span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ant</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YmVlOzs7bmlsOzs7ZGVlcjs7O2VtcHR5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>fp_b:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bee</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fp_d:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fp_e:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='label'>changed:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
  </div>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>2.7.1.65</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(fingerprint:, source_fields:, target:, delim: &quot;␟&quot;, prefix: &quot;fp&quot;, delete_fp: false, ignore_fields: [], empty_equals_nil: true)  &#x21d2; FlagChanged </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of FlagChanged.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>(row)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(fingerprint:, source_fields:, target:, delim: &quot;␟&quot;, prefix: &quot;fp&quot;, delete_fp: false, ignore_fields: [], empty_equals_nil: true)  &#x21d2; <tt><span class='object_link'><a href="" title="Kiba::Extend::Transforms::Fingerprint::FlagChanged (class)">FlagChanged</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of FlagChanged.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>fingerprint</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the name of the field containing
fingerprint values</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>source_fields</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>names of fields used to
generate the fingerprint</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>name of field in which to add field names
in which values have changed</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delim</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;␟&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>used to join/split fields before hashing/after
decoding. The default value is U+241F / E2 90 9F / Symbol for Unit
Separator.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prefix</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;fp&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>added to the names of the decoded fields
added to rows</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delete_fp</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>whether to delete the given fingerprint
field</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ignore_fields</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>fields included in the
fingerprint that should NOT compared/flagged</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>empty_equals_nil</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>whether to treat blank and nil
values as equal</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>4.0.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/kiba/extend/transforms/fingerprint/flag_changed.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>fingerprint:</span><span class='comma'>,</span> <span class='label'>source_fields:</span><span class='comma'>,</span> <span class='label'>target:</span><span class='comma'>,</span> <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>␟</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>delete_fp:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>ignore_fields:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='label'>empty_equals_nil:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@decoder</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Decode.html" title="Kiba::Extend::Transforms::Fingerprint::Decode (class)">Decode</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Decode.html#initialize-instance_method" title="Kiba::Extend::Transforms::Fingerprint::Decode#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='label'>fingerprint:</span> <span class='id identifier rubyid_fingerprint'>fingerprint</span><span class='comma'>,</span>
    <span class='label'>source_fields:</span> <span class='id identifier rubyid_source_fields'>source_fields</span><span class='comma'>,</span>
    <span class='label'>delim:</span> <span class='id identifier rubyid_delim'>delim</span><span class='comma'>,</span>
    <span class='label'>prefix:</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span>
    <span class='label'>delete_fp:</span> <span class='id identifier rubyid_delete_fp'>delete_fp</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@target</span> <span class='op'>=</span> <span class='id identifier rubyid_target'>target</span>
  <span class='ivar'>@empty_equals_nil</span> <span class='op'>=</span> <span class='id identifier rubyid_empty_equals_nil'>empty_equals_nil</span>
  <span class='ivar'>@source_fields</span> <span class='op'>=</span> <span class='id identifier rubyid_source_fields'>source_fields</span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='id identifier rubyid_ignore_fields'>ignore_fields</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span>
  <span class='ivar'>@target_fields</span> <span class='op'>=</span> <span class='ivar'>@source_fields</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_field'>field</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="process-instance_method">
  
    #<strong>process</strong>(row)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>row</span>
      
      
        <span class='type'>(<tt>Hash{ Symbol =&gt; String, nil }</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>2.7.1.65</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/kiba/extend/transforms/fingerprint/flag_changed.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_target'>target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_decoder'>decoder</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_changed'>changed</span> <span class='op'>=</span> <span class='id identifier rubyid_record_changes'>record_changes</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_row'>row</span> <span class='kw'>if</span> <span class='id identifier rubyid_changed'>changed</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_target'>target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_changed'>changed</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span><span class='period'>.</span><span class='id identifier rubyid_delim'><span class='object_link'><a href="../../../Extend.html#delim-class_method" title="Kiba::Extend.delim (method)">delim</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Sep 28 14:50:50 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.1.4).
</div>

    </div>
  </body>
</html>