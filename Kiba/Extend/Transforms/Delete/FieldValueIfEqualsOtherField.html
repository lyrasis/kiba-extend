<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField
  
    &mdash; Kiba-Extend Documentation
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Transforms.html" title="Kiba::Extend::Transforms (module)">Transforms</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span>
     &raquo; 
    <span class="title">FieldValueIfEqualsOtherField</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../MultivalPlusDelimDeprecatable.html" title="Kiba::Extend::Transforms::MultivalPlusDelimDeprecatable (module)">MultivalPlusDelimDeprecatable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/kiba/extend/transforms/delete/field_value_if_equals_other_field.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Deletes value in <code>delete</code> field if that value matches value
  in <code>if_equal_to</code> field. Opinionated treatment of
  multivalued fields described below. Case sensitive or
  insensitive matching options. Can also delete associated
  field values (by position) in additional grouped fields.
  This is useful, for example, in maintaining the integrity
  of grouped/subgrouped multivalue fields in
  CollectionSpace.</p>

<p><strong>Note that the value of the <code>if_equal_to</code> field is never modified by
  this transform.</strong></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Simple example</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Delete::FieldValueIfEqualsOtherField,
</span><span class='comment'>#    delete: :del, if_equal_to: :compare
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span><span class='op'>::</span><span class='const'>FieldValueIfEqualsOtherField</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>delete:</span> <span class='symbol'>:del</span><span class='comma'>,</span>
  <span class='label'>if_equal_to:</span> <span class='symbol'>:compare</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span>
<span class='comment'># Notes
</span><span class='comment'>#
</span><span class='comment'># The first row is left alone because a != b.
</span><span class='comment'>#
</span><span class='comment'># In the second row, c is deleted from `del` because the value of
</span><span class='comment'>#   `compare` is also c.</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Multival comparisons with positional_compare</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Delete::FieldValueIfEqualsOtherField,
</span><span class='comment'>#    delete: :del, if_equal_to: :compare, multival: true
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span><span class='op'>::</span><span class='const'>FieldValueIfEqualsOtherField</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>delete:</span> <span class='symbol'>:del</span><span class='comma'>,</span> <span class='label'>if_equal_to:</span> <span class='symbol'>:compare</span><span class='comma'>,</span> <span class='label'>multival:</span> <span class='kw'>true</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b|a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|d</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z|c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|d</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Multival comparisons with non-positional_compare</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Delete::FieldValueIfEqualsOtherField,
</span><span class='comment'>#    delete: :del, if_equal_to: :compare, multival: true,
</span><span class='comment'>#    positional_compare: false
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span><span class='op'>::</span><span class='const'>FieldValueIfEqualsOtherField</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>delete:</span> <span class='symbol'>:del</span><span class='comma'>,</span> <span class='label'>if_equal_to:</span> <span class='symbol'>:compare</span><span class='comma'>,</span> <span class='label'>multival:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>positional_compare:</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a|b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b|a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|d</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z|c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c|d</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d|c</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Even multival grouped fields, case insensitive</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Delete::FieldValueIfEqualsOtherField,
</span><span class='comment'>#    delete: :del, if_equal_to: :compare, multival: true,
</span><span class='comment'>#    delim: &quot;;&quot;, grouped_fields: %i[grpa grpb],
</span><span class='comment'>#    casesensitive: false
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span><span class='op'>::</span><span class='const'>FieldValueIfEqualsOtherField</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>delete:</span> <span class='symbol'>:del</span><span class='comma'>,</span>
  <span class='label'>if_equal_to:</span> <span class='symbol'>:compare</span><span class='comma'>,</span>
  <span class='label'>multival:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>grouped_fields:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>grpa</span><span class='words_sep'> </span><span class='tstring_content'>grpb</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>casesensitive:</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A;C;d;c;e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y;x;w;u;v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e;f;g;h;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;z;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d;e;f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g;h;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A;d;e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y;w;v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e;g;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;z;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='kw'>nil</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span>
<span class='comment'># ROW 1
</span><span class='comment'># If `compare` is a single value, all individual values in `del`
</span><span class='comment'>#   are compared to the single `compare` value.
</span><span class='comment'>#
</span><span class='comment'># In `del` field, elements 1 (C) and 3 (c) are case-insensitive
</span><span class='comment'>#   matches on the value in `compare`. Thus, elements 1 and 3 are
</span><span class='comment'>#   removed from `del` and both grouped fields.
</span><span class='comment'>#
</span><span class='comment'># ROW 2
</span><span class='comment'># If `compare` has multiple values, the values of `del` and
</span><span class='comment'>#   `compare` are compared positionally.
</span><span class='comment'>#
</span><span class='comment'># Element 0 is a match (a in both). Element 1 is not (b != z).
</span><span class='comment'>#   Element 2 is a match (c in both).
</span><span class='comment'>#
</span><span class='comment'># Elements 0 and 2 are removed `del` and all grouped fields.
</span><span class='comment'>#
</span><span class='comment'># ROW 3
</span><span class='comment'># `compare` is multivalued, so `del` is compared positionally
</span><span class='comment'>#   against `compare`, though `del` (and the grouped fields) are
</span><span class='comment'>#   single valued.
</span><span class='comment'>#
</span><span class='comment'># When all values are removed from a field, `nil` is returned.
</span><span class='comment'>#
</span><span class='comment'># ROW 4
</span><span class='comment'># a != b, so row is returned unmodified.
</span><span class='comment'>#
</span><span class='comment'># ROW 5
</span><span class='comment'># a = a, so a (Element 0) is removed from `del`. Element 0 is then
</span><span class='comment'>#   removed from the grouped fields.</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Even multival grouped, case insensitive, nonpositional</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Delete::FieldValueIfEqualsOtherField,
</span><span class='comment'>#    delete: :del, if_equal_to: :compare, multival: true,
</span><span class='comment'>#    delim: &quot;;&quot;, grouped_fields: %i[grpa grpb],
</span><span class='comment'>#    casesensitive: false, positional_compare: false
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span><span class='op'>::</span><span class='const'>FieldValueIfEqualsOtherField</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>delete:</span> <span class='symbol'>:del</span><span class='comma'>,</span>
  <span class='label'>if_equal_to:</span> <span class='symbol'>:compare</span><span class='comma'>,</span>
  <span class='label'>multival:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>grouped_fields:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>grpa</span><span class='words_sep'> </span><span class='tstring_content'>grpb</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>casesensitive:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>positional_compare:</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A;C;d;c;e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y;x;w;u;v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e;f;g;h;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;z;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d;e;f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g;h;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z;c;a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d;e;f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g;h;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b;a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A;d;e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y;w;v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e;g;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;z;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z;c;a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a;b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='kw'>nil</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b;a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='kw'>nil</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='lbrace'>{</span><span class='label'>row:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>del:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Ragged multival grouped fields, case insensitive</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Used in pipeline as:
</span><span class='comment'># transform Delete::FieldValueIfEqualsOtherField,
</span><span class='comment'>#    delete: :del, if_equal_to: :compare, multival: true,
</span><span class='comment'>#    delim: &quot;;&quot;, grouped_fields: %i[grpa grpb],
</span><span class='comment'>#    casesensitive: false
</span><span class='id identifier rubyid_xform'>xform</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Delete.html" title="Kiba::Extend::Transforms::Delete (module)">Delete</a></span></span><span class='op'>::</span><span class='const'>FieldValueIfEqualsOtherField</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>delete:</span> <span class='symbol'>:del</span><span class='comma'>,</span>
  <span class='label'>if_equal_to:</span> <span class='symbol'>:compare</span><span class='comma'>,</span>
  <span class='label'>multival:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>delim:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>grouped_fields:</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>grpa</span><span class='words_sep'> </span><span class='tstring_content'>grpb</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='label'>casesensitive:</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A;C;d;e;c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y;x;w;u</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e;f;g;h;i</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'>StreamingRunner</span><span class='period'>.</span><span class='id identifier rubyid_transform_stream'>transform_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_xform'>xform</span><span class='rparen'>)</span>
  <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span><span class='label'>del:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A;d;e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>compare:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpa:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y;w;u</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>grpb:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e;g;h</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rbracket'>]</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='rparen'>)</span>
<span class='comment'># This triggers a warning printed to STDOUT, which may trigger you
</span><span class='comment'>#   to examine the input data:
</span>
<span class='comment'># ~~~
</span><span class='comment'># KIBA WARNING: One or more grouped fields (grpa, grpb) has
</span><span class='comment'>#   different number of values than the others in {:del=&gt;&quot;A;d;e&quot;,
</span><span class='comment'>#   :compare=&gt;&quot;c&quot;, :grpa=&gt;&quot;y;x;w;u&quot;, :grpb=&gt;&quot;e;f;g;h;i&quot;}
</span><span class='comment'># ~~~
</span>
<span class='comment'># If `del` had 4 elements and one or more of the grouped fields had
</span><span class='comment'>#   a different number of elements, this would be handled similarly,
</span><span class='comment'>#   with a slightly different warning.
</span>
<span class='comment'># `grpa` has 4 values, while `grpb` has 5.
</span><span class='comment'>#
</span><span class='comment'># Elements 1 and 4 from `del` match `compare`, so they are deleted.
</span><span class='comment'>#   Those elements are also deleted from the grouped fields if
</span><span class='comment'>#   present.</span></code></pre>
    
  </div>


</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(delete:, if_equal_to:, multival: omitted = true, positional_compare: true, delim: nil, grouped_fields: [], casesensitive: true)  &#x21d2; FieldValueIfEqualsOtherField </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of FieldValueIfEqualsOtherField.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>(row)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../MultivalPlusDelimDeprecatable.html" title="Kiba::Extend::Transforms::MultivalPlusDelimDeprecatable (module)">MultivalPlusDelimDeprecatable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../MultivalPlusDelimDeprecatable.html#set_multival-instance_method" title="Kiba::Extend::Transforms::MultivalPlusDelimDeprecatable#set_multival (method)">#set_multival</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(delete:, if_equal_to:, multival: omitted = true, positional_compare: true, delim: nil, grouped_fields: [], casesensitive: true)  &#x21d2; <tt><span class='object_link'><a href="" title="Kiba::Extend::Transforms::Delete::FieldValueIfEqualsOtherField (class)">FieldValueIfEqualsOtherField</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of FieldValueIfEqualsOtherField.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>delete</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>field from which values will be deleted</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>if_equal_to</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>field the <code>delete</code> values will be
compared to. In other words, the other field</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>multival</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>omitted = true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p><strong>DEPRECATED - Do not use</strong></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>positional_compare</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>whether to compare multivalues
positionally. Only relevant if <code>multival</code> is true and
<code>if_equal_to</code> is multivalued</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delim</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>on which to split if <code>multival</code>. Defaults to
<code>Kiba::Extend.delim</code> if not provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>grouped_fields</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>field(s) from which
positionally corresponding values should also be removed</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>casesensitive</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>matching mode</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/kiba/extend/transforms/delete/field_value_if_equals_other_field.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>delete:</span><span class='comma'>,</span> <span class='label'>if_equal_to:</span><span class='comma'>,</span>
  <span class='label'>multival:</span> <span class='id identifier rubyid_omitted'>omitted</span> <span class='op'>=</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>positional_compare:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>delim:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>grouped_fields:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>casesensitive:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@delete</span> <span class='op'>=</span> <span class='id identifier rubyid_delete'>delete</span>
  <span class='ivar'>@compare</span> <span class='op'>=</span> <span class='id identifier rubyid_if_equal_to'>if_equal_to</span>
  <span class='ivar'>@multival</span> <span class='op'>=</span> <span class='id identifier rubyid_set_multival'>set_multival</span><span class='lparen'>(</span><span class='id identifier rubyid_multival'>multival</span><span class='comma'>,</span> <span class='id identifier rubyid_omitted'>omitted</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='ivar'>@positional</span> <span class='op'>=</span> <span class='id identifier rubyid_positional_compare'>positional_compare</span>
  <span class='ivar'>@delim</span> <span class='op'>=</span> <span class='id identifier rubyid_delim'>delim</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../../../../Kiba.html" title="Kiba (module)">Kiba</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Extend.html" title="Kiba::Extend (module)">Extend</a></span></span><span class='period'>.</span><span class='id identifier rubyid_delim'><span class='object_link'><a href="../../../Extend.html#delim-class_method" title="Kiba::Extend.delim (method)">delim</a></span></span>
  <span class='ivar'>@group</span> <span class='op'>=</span> <span class='id identifier rubyid_grouped_fields'>grouped_fields</span>
  <span class='ivar'>@casesensitive</span> <span class='op'>=</span> <span class='id identifier rubyid_casesensitive'>casesensitive</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="process-instance_method">
  
    #<strong>process</strong>(row)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>row</span>
      
      
        <span class='type'>(<tt>Hash{ Symbol =&gt; String, nil }</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/kiba/extend/transforms/delete/field_value_if_equals_other_field.rb', line 281</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_del_val'>del_val</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_val'>prepare_val</span><span class='lparen'>(</span><span class='id identifier rubyid_delete'>delete</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='symbol'>:compare</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_compare_val'>compare_val</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_val'>prepare_val</span><span class='lparen'>(</span><span class='id identifier rubyid_compare'>compare</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='symbol'>:compare</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_row'>row</span> <span class='kw'>if</span> <span class='id identifier rubyid_compare_val'>compare_val</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_del_val'>del_val</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_compare_method'>compare_method</span> <span class='op'>=</span> <span class='id identifier rubyid_get_compare_method'>get_compare_method</span><span class='lparen'>(</span><span class='id identifier rubyid_del_val'>del_val</span><span class='comma'>,</span> <span class='id identifier rubyid_compare_val'>compare_val</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_to_delete'>to_delete</span> <span class='op'>=</span> <span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='id identifier rubyid_compare_method'>compare_method</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_del_val'>del_val</span><span class='comma'>,</span> <span class='id identifier rubyid_compare_val'>compare_val</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_row'>row</span> <span class='kw'>if</span> <span class='id identifier rubyid_to_delete'>to_delete</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_orig_del_val'>orig_del_val</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_val'>prepare_val</span><span class='lparen'>(</span><span class='id identifier rubyid_delete'>delete</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='symbol'>:final</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_delete'>delete</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_do_deletes'>do_deletes</span><span class='lparen'>(</span><span class='id identifier rubyid_to_delete'>to_delete</span><span class='comma'>,</span> <span class='id identifier rubyid_orig_del_val'>orig_del_val</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_row'>row</span> <span class='kw'>unless</span> <span class='id identifier rubyid_grouped?'>grouped?</span>

  <span class='id identifier rubyid_grouped'>grouped</span> <span class='op'>=</span> <span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_prepare_val'>prepare_val</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_validation'>validation</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_groups'>validate_groups</span><span class='lparen'>(</span><span class='id identifier rubyid_grouped'>grouped</span><span class='comma'>,</span> <span class='id identifier rubyid_orig_del_val'>orig_del_val</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_report_group_issue'>report_group_issue</span><span class='lparen'>(</span><span class='id identifier rubyid_validation'>validation</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_validation'>validation</span> <span class='op'>==</span> <span class='symbol'>:valid</span>
  <span class='id identifier rubyid_grouped'>grouped</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_grp'>grp</span><span class='op'>|</span> <span class='id identifier rubyid_do_deletes'>do_deletes</span><span class='lparen'>(</span><span class='id identifier rubyid_to_delete'>to_delete</span><span class='comma'>,</span> <span class='id identifier rubyid_grp'>grp</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_grp'>grp</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_group'>group</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_grp'>grp</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct  2 21:32:16 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.1.7).
</div>

    </div>
  </body>
</html>